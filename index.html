<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Pages Browser</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }

        #header {
            background-color: #333;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #addressBar {
            width: 80%;
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
        }

        #goButton {
            padding: 10px;
            font-size: 16px;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        #goButton:hover {
            background-color: #45a049;
        }

        #webView {
            width: 100%;
            height: calc(100vh - 60px);
            border: none;
            background-color: #fff;
        }

        /* Dark Mode Toggle */
        #privateModeToggle {
            color: white;
            background-color: #555;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        #privateModeToggle.active {
            background-color: #222;
            border: 2px solid #f44336;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            #addressBar {
                width: 70%;
            }

            #goButton {
                padding: 8px;
                font-size: 14px;
            }

            #privateModeToggle {
                padding: 6px 10px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

    <!-- Header with search bar -->
    <div id="header">
        <input type="text" id="addressBar" placeholder="Enter URL here..." value="https://example.com">
        <button id="goButton">Go</button>
        <button id="privateModeToggle">Private Mode</button>
    </div>

    <!-- Webpage view in iframe -->
    <iframe id="webView" src="https://example.com" sandbox="allow-scripts allow-same-origin"></iframe>

    <script>
        const addressBar = document.getElementById('addressBar');
        const goButton = document.getElementById('goButton');
        const webView = document.getElementById('webView');
        const privateModeToggle = document.getElementById('privateModeToggle');
        let privateMode = false;

        // Thingproxy URL
        const proxyUrl = 'https://thingproxy.freeboard.io/fetch/';

        // Navigate to the URL when the "Go" button is clicked or Enter key is pressed
        goButton.addEventListener('click', navigateToURL);
        addressBar.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                navigateToURL();
            }
        });

        function navigateToURL() {
            let url = addressBar.value;

            // Auto-add http if not provided
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            // Load the page using Thingproxy
            webView.src = proxyUrl + url;
        }

        // Toggle Private Mode
        privateModeToggle.addEventListener('click', () => {
            privateMode = !privateMode;

            if (privateMode) {
                privateModeToggle.classList.add('active');
                privateModeToggle.innerHTML = 'Private Mode ON';

                // Clear cookies and localStorage to simulate private mode
                document.cookie = '';
                localStorage.clear();
                sessionStorage.clear();

                // Show message in iframe that private mode is enabled
                webView.srcdoc = `
                    <html>
                        <body style="background-color: #111; color: #fff; text-align: center;">
                            <h1>Private Mode is ON</h1>
                            <p>Your browsing history will not be stored.</p>
                        </body>
                    </html>`;
            } else {
                privateModeToggle.classList.remove('active');
                privateModeToggle.innerHTML = 'Private Mode';
                navigateToURL(); // Refresh the last entered URL
            }
        });

        // Error handling if the website fails to load
        webView.onerror = () => {
            webView.srcdoc = `
                <html>
                    <body style="text-align: center; color: red;">
                        <h1>Failed to Load Page</h1>
                        <p>Please check the URL and try again.</p>
                    </body>
                </html>`;
        };
    </script>
</body>
</html>
